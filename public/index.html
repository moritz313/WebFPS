<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebFPS - Multiplayer Shooter</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://unpkg.com/three@0.160.0/build/three.min.js"></script>
    <script>
        // Fallback fÃ¼r Three.js falls CDN fehlschlÃ¤gt
        if (typeof THREE === 'undefined') {
            document.write('<script src="/lib/three.min.js"><\/script>');
        }
    </script>
    <!-- Kein GLTFLoader mehr nÃ¶tig - Shotgun ist hardcoded! -->
    <script>
        // Einfach warten bis THREE.js geladen ist
        window.addEventListener('load', function() {
            setTimeout(function() {
                console.log('âœ… THREE.js verfÃ¼gbar:', typeof THREE !== 'undefined');
                console.log('ðŸŽ¯ GLTFLoader wird nicht mehr benÃ¶tigt - Shotgun ist hardcoded!');
            }, 500);
        });
    </script>
    <script src="/socket.io/socket.io.js"></script>
</head>
<body>
    <div id="ui">
        <div id="hud">
            <div id="crosshair" class="rifle">+</div>
            <div id="cooldown-bar" style="display: none;">
                <div id="cooldown-fill"></div>
            </div>
            <div id="health">
                <span>Leben: </span>
                <span id="healthValue">100</span>
            </div>
            <div id="ammo">
                <span>Munition: âˆž</span>
            </div>
            <div id="weapon">
                <span id="weapon-icon">ðŸ”«</span>
                <span>Waffe: </span>
                <span id="weapon-display">Gewehr</span>
            </div>
            <div id="zoom-status" style="display: none; color: #0088ff; font-weight: bold; font-size: 16px;">
                ZOOM AKTIV
            </div>
            <div id="hitmarker" style="display: none; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; z-index: 1001; width: 32px; height: 32px;">
                <img id="hitmarker-image" src="https://i.imgur.com/ARLyLTl.png" alt="Hitmarker" style="width: 100%; height: 100%; object-fit: contain;">
            </div>
            
            <div id="scoreboard" class="hidden">
                <div id="scoreboard-header">
                    <h3>SCOREBOARD</h3>
                </div>
                <div id="scoreboard-content">
                    <div id="players-list">
                        <!-- Spieler werden dynamisch hinzugefÃ¼gt -->
                    </div>
                </div>
            </div>
        </div>
        
        <div id="menu" class="hidden">
            <h1>WebFPS Multiplayer</h1>
            <div id="player-settings">
                <div id="username-container">
                    <label for="usernameInput">Benutzername:</label>
                    <input type="text" id="usernameInput" placeholder="Dein Name..." maxlength="15" value="">
                </div>
                <div id="color-container">
                    <label for="colorPicker">Spielerfarbe:</label>
                    <input type="color" id="colorPicker" value="#ff0000">
                </div>
            </div>
            <button id="startBtn">Spiel starten</button>
            <div id="instructions">
                <h3>Steuerung:</h3>
                <p>WASD - Bewegung</p>
                <p>Shift - Sprinten</p>
                <p>Leertaste - Springen</p>
                <p>Maus - Umschauen</p>
                <p>Linke Maustaste - SchieÃŸen</p>
                <p>Rechte Maustaste (halten) - Zoom (Sniper)</p>
                <p>1 - Gewehr</p>
                <p>2 - Shotgun</p>
                <p>3 - Sniper</p>
                <p>Tab (halten) - Scoreboard</p>
                <p>ESC - MenÃ¼</p>
            </div>
        </div>
        
        <div id="death-screen" class="hidden">
            <h2>Du wurdest eliminiert!</h2>
            <p>Respawn in <span id="respawn-timer">5</span> Sekunden...</p>
        </div>
    </div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        // Warten bis alle Scripts geladen sind, dann game.js laden
        window.addEventListener('load', function() {
            if (typeof THREE !== 'undefined' && typeof io !== 'undefined') {
                const script = document.createElement('script');
                script.src = 'game.js';
                document.body.appendChild(script);
            } else {
                console.error('Three.js oder Socket.io nicht geladen');
            }
        });
    </script>
</body>
</html> 